<!DOCTYPE html>
<html lang="es" ng-app="myApp" ng-controller="myController">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
        </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    <title>ROADMAPS</title>

    <link rel="shortcut icon" type="image/png" href="roadmaps.png" />

</head>

<body>


    <div class="container-fluid">
        <div class="row flex-nowrap">
            <div class="col-auto px-0">
                <div id="sidebar" class="collapse collapse-horizontal show border-end" style="width: 350px;">
                    <div id="index" class="list-group border-0 rounded-0 text-sm-start min-vh-100">

                    </div>
                </div>
            </div>
            <main class="col pt-2">
                <a href="#" data-bs-target="#sidebar" data-bs-toggle="collapse"
                    class="btn btn-primary rounded-3 m-2 p-2 text-decoration-none">
                    Menu</a>
                <a href="/roadmaps/content/" class="btn btn-primary rounded-3 m-2 p-2 text-decoration-none">
                    Home</a>
                <div class="row">
                    <div class="col-12 pt-4" id="template">

                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            let loadtemplate = function (tpl) {
                fetch(tpl + ".md").then(function (response) {
                    return response.text();
                }).then(function (code) {

                    const converter = new showdown.Converter();
                    //$scope.template = converter.makeHtml(response.data);

                    const elem = document.getElementById('template');
                    elem.innerHTML = converter.makeHtml(code);

                    let strIndex = ' <div class="list-group list-group-flush border-bottom scrollarea">';
                    //console.log(document.querySelectorAll("h1, h2, h3, h4, h5, h6"));
                    document.querySelectorAll("h1, h2, h3").forEach(function (element, indice) {

                        //console.log(element);
                        element.setAttribute("id", element.tagName + indice)
                        //console.log(index + ": " + $(this).prop("tagName") + " - " + $(this).text());
                        if (element.tagName == "H1") {
                            strIndex += '<li class="list-group-item list-group-item-warning">';
                            strIndex += '<a style="margin-left:0px;font-size:1.2em" data-bs-parent="#sidebar" href="#' + element.tagName + indice + '">';
                        } else {
                            if (element.tagName == "H2") {
                                strIndex += '<li class="list-group-item list-group-item-primary">';
                                strIndex += '<a style="margin-left:20px;font-size:1em" data-bs-parent="#sidebar" href="#' + element.tagName + indice + '">';
                            } else {
                                if (element.tagName == "H3") {
                                    strIndex += '<li class="list-group-item list-group-item-secondary">';
                                    strIndex += '<a style="margin-left:50px;font-size:0.8em" data-bs-parent="#sidebar" href="#' + element.tagName + indice + '">';
                                } else {

                                }
                            }

                        }

                        //strIndex += '<div class="d-flex w-100 align-items-center justify-content-between">';
                        //strIndex += '<strong class="mb-1">';
                        strIndex += '<span>';
                        strIndex += element.tagName + " - " + element.textContent;
                        strIndex += '</span>';
                        //strIndex += '</strong>';
                        //strIndex += '</div>';
                        strIndex += "</a>";
                        strIndex += "</li>";

                    });


                    document.getElementById('index').innerHTML = strIndex;
                });
            }
            loadtemplate("database");
        });



    </script>
</body>

</html>
